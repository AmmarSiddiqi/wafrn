<ng-container *ngIf="fragment">
  <div class="flex justify-content-between">
    <div class="min-w-0">
      <div class="flex gap-2">
        <div class="flex gap-2 mr-auto min-w-0">
          <app-avatar-small [user]="fragment.user"></app-avatar-small>
          <div class="flex flex-column min-w-0">
            <div class="user-name">
              <a class="subtle-link" [routerLink]="!disableLink ? '/blog/' + fragment.user.url: null"
                [innerHTML]="fragment.user.name"></a>
              {{headerText}}
            </div>
            <span class="text-sm max-w-full white-space-nowrap overflow-hidden text-overflow-ellipsis user-url"
              [innerText]="fragment.user.url"></span>
          </div>
        </div>
      </div>
      <div class="mt-1 flex justify-content-between metadata">
        <div *ngIf="!simplified" class="date-line flex gap-2 align-items-center">
          <span class="text-sm" matTooltip="{{fragment.createdAt | date : 'short'}}">
            {{ fragment.createdAt | dateTimeFromJsDate | dateTimeToRelative:{ style: 'long' } }}
          </span>
          <span *ngIf="fragment.updatedAt.getTime() - fragment.createdAt.getTime() > 60000" matTooltip="Edited {{ fragment.updatedAt | date : 'short' }}" class="text-xs">
            <fa-icon [icon]="editedIcon"></fa-icon>
          </span>
          <span class="text-xs" matTooltip="{{privacyOptions[fragment.privacy].name}}">
            <fa-icon [icon]="privacyOptions[fragment.privacy].icon"></fa-icon>
          </span>
        </div>
      </div>
    </div>
    <div class="flex flex-column align-items-center">
      <app-post-actions *ngIf="!simplified" [content]="fragment"></app-post-actions>
      <button mat-button color="accent" *ngIf="
        !postService.notYetAcceptedFollowedUsersIds.includes(fragment.userId) &&
        !postService.followedUserIds.includes(fragment.userId) &&
        userLoggedIn
        " class="text-sm follow-button" (mousedown)="followUser(fragment.userId)">Follow</button>
      <button mat-button color="accent"
        *ngIf="postService.notYetAcceptedFollowedUsersIds.includes(fragment.userId) && userLoggedIn"
        class="text-sm follow-button" (mousedown)="unfollowUser(fragment.userId)">Awaiting approval</button>
    </div>
  </div>
</ng-container>
